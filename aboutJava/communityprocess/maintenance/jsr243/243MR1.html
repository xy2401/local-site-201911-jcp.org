
<!-- ** BEGIN: header.jsp ** //-->






















<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3c.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
<head>
    

   
    <link href="/includes/css/menu.css" rel="stylesheet" type="text/css"></link>
    <link href="/includes/css/style.css" rel="stylesheet" type="text/css"></link>
    <!--[if lt IE 6]><link href="/includes/css/style5.css" rel="stylesheet" type="text/css" ></link><![endif]-->
    <!--[if gte IE 5]><link href="/includes/css/style6.css" rel="stylesheet" type="text/css" ></link><![endif]-->
    <link href="/includes/css/tabs.css"  rel="stylesheet" type="text/css"></link>

    <script type="text/javascript" src="/includes/scripts/tabs.js"></script>
    <script type="text/javascript" src="/includes/scripts/menu.js"></script>
   

    

    
        <title>The Java Community Process(SM) Program - communityprocess - maintenance</title>
    

    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>



<body onload="P7_initPM(0,1,0,0,-1)">

    <a name="top"></a>

    <div id="header">
	<div id="logo">
		<a href="/en/home/index"><img src="/images/spacer.gif" alt="Java Community Process" height="81" width="151"></a>
	</div>
	<div id="tools">
		<div class="search">
			<form name="search" action="/en/jsr/summary" method="get" onsubmit="return validate_search()">
				<input name="id" value="Search JSRs" size="16" class="form" onfocus="nullify_if_equal(this, 'Search JSRs')" type="text">
				<a href="javascript:document.search.submit()" onclick="return validate_search()"><img src="/images/button_go.gif" width="21" height="16" border="0" alt="Submit this Search" name="sub_search"></a>
			</form>
		</div>
		<div class="tools">
			<a href="/en/press/pressroom">Press Room</a> &nbsp;|&nbsp;
			<a href="http://java.com/java/download/index.jsp?cid=jdp78399">Get Java Here</a> &nbsp;|&nbsp;
			<!-- <a href="javascript:void(0)">Print Format</a> &nbsp;|&nbsp;&nbsp; -->
		</div>

	</div>
	<div style="clear: right;"></div>

        

	<div class="topbar"><img src="/images/spacer.gif" alt="" height="3" width="154"></div>
	<div id="update"> </div>
    </div>


    

        <!-- ** BEGIN: Content Table ** //-->

        <table width="100%" border="0" cellpadding="0" cellspacing="0">

            <tr>

                <!-- ** BEGIN: Navigation Column ** //-->
                <td width="150" id="leftcontent" valign="top">
                    <!-- Navigation Placeholder //-->

                    

                    <div class="bar"><img src="/images/hr_dots1.gif" alt="" height="3" width="150"></div>

        <!-- begin find JSRs form -->
        <!-- IMPORTANT! do not convert this form to Struts < html : form > tag.  javascript change of form.action property fails. -->
        <img src="/images/hd_find-jsrs.gif" alt="Find JSRs" height="18" width="150">
        <form name="findjsr" action="/en/jsr/summary" method="get" class="pt5" onsubmit="return validate_findjsr()">
            <input name="id" size="18" class="form" value="Search JSRs" onfocus="nullify_if_equal(this, 'Search JSRs')" type="text">
	    <a href="javascript:document.findjsr.submit()" onclick="return validate_findjsr()"><img src="/images/button_go.gif" width="21" height="16" border="0" alt="Submit this Search" name="sub_search"></a>
        </form><br><br>

        <!-- ** Menu Start ** //-->

        <ul id="p7PMnav">
            <li><a href="/en/jsr/platform">JSRs by Platform</a></li>
            <li><a href="/en/jsr/tech">JSRs by Technology</a></li>
            <li><a href="/en/jsr/stage">JSRs by Stage</a></li>
            <li><a href="/en/jsr/ec">JSRs by Committee</a></li>
            <li><a href="/en/jsr/all">List of All JSRs</a></li>

            <!--end find JSRs form -->
            <div style="clear: both;"><img src="/images/spacer.gif" alt="" height="25" width="1"></div>

            <!--begin my JCP -->
            <img src="/images/hd_my-jcp.gif" alt="My JCP" height="18" width="150">
            

          <form name="login" method="get" action="/en/user/login" >
            <input name="Sign-in" type="submit" title="Sign-in" value="Sign-in" />
          </form>

            <div style="clear:both"><img src="/images/global/spacer.gif" width="1" height="3" alt=""></div>
            <div class="noNav">
                <a href="/en/user/register">Register for Site</a>
            </div>

             <div class="bar"><img src="/images/hr_dots1.gif" alt="" height="3" width="150"></div>
           <div class="noNav" style="color: #666666; padding: 0;">
              Use of JCP site is subject to the
              <a href="/en/home/terms" style="display:inline;padding: 0">JCP Terms of Use</a> and the
              <a href="http://www.oracle.com/us/legal/privacy/index.html" style="display:inline;padding: 0" href="">Oracle Privacy Policy</a>
          </div>

            

            <div style="clear:both"><img src="/images/global/spacer.gif" width="1" height="25" alt=""></div>

            <!--begin JCP info -->
            <img src="/images/hd_jcp-info.gif" alt="JCP Info" height="18" width="150">

            <li><a href="/en/procedures/overview" class="p7PMtrg">About JCP</a>
                <ul>
                    <li><a href="/en/procedures/overview">Program Overview</a></li>
                    <li><a href="/en/procedures/jcp2">JCP Process Document</a></li>
                    <li><a href="/en/whatsnew/calendar">Calendar</a></li>
                    <li><a href="/en/participation/members">JCP Members</a></li>
                    <li><a href="/en/participation/committee">Executive Committee</a></li>
                    <li><a href="/en/whatsnew/elections">Elections</a></li>
                </ul>
            </li>

            <li><a href="/en/participation/overview" class="p7PMtrg">Get Involved</a>
		<ul>
                    <li><a href="/en/participation/overview">Overview</a></li>
                    <li><a href="/en/participation/membership">Becoming a JCP Member</a></li>
		</ul>
            </li>

            <li><a href="/en/resources/contents" class="p7PMtrg">Community Resources</a>
                <ul>
                    <li><a href="/en/resources/contents">Overview</a></li>
                    <li><a href="/en/resources/tutorials">Tutorials</a></li>
                    <li><a href="/en/resources/multimedia">JCP Podcasts</a></li>
                    <li><a href="/en/resources/guide">Spec Lead Guide</a></li>
                    <li><a href="/en/resources/tdk">TCK Tool & Info</a></li>
                    <li><a href="/en/resources/license_reference">License Reference</a></li>
                </ul>
            </li>

            <li><a href="/en/press/pmo" class="p7PMtrg">Community News</a>
                <ul>
                    <li><a href="/en/press/pmo">News</a></li>
                    <li><a href="/en/press/news/awards/awards_main">Programs &amp; Awards</a></li>
                    <li><a href="/en/press/releases">Press Releases</a></li>
                    <li><a href="/en/press/success">Success Stories</a></li>
                </ul>
            </li>

            <li><a href="/en/introduction/faq">FAQ</a></li>

            <li><a href="/en/resources/contacts">Contact Us</a></li>

            <div style="clear: both;"><img src="/images/spacer.gif" alt="" height="25" width="1"></div>

            <!--[if lte IE 6]><style>#p7PMnav a{height:1em;}#p7PMnav li{height:1em;float:left;clear:both;width:100%}</style><![endif]-->
            <!--[if IE 6]><style>#p7PMnav li{clear:none;}</style><![endif]-->
            <!--[if IE 7]><style>#p7PMnav a{zoom:100%;}#p7PMnav li{float:left;clear:both;width:100%;}</style><![endif]-->
        </ul>

        

        <!--begin ad space -->
        <div class="ads">
            <a href="http://java.com/java/download/index.jsp?cid=jdp78399" target="_blank"><img style="display: ;" src="/images/ad_banner2.gif" alt="Ad Banner" border="1" height="70" width="150"></a>
        </div>
        <!--end ad space -->

<!-- ** Menu End ** //-->
&nbsp;<br>
&nbsp;<br>
&nbsp;<br>

    

                    &nbsp;<br>
                    <img src="/images/common/trans.gif" alt="" width="1" height="150"><br>

              



                </td>
                <!-- ** END: Navigation Column ** //-->

                <!-- ** BEGIN: Gutter Column ** //-->
		<td width="10" nowrap><img src="/images/common/trans.gif" alt="" width="10" height="1"></td>
                <!-- ** END: Gutter Column ** //-->

                <!-- ** BEGIN: Content Column ** //-->
                <td width="100%" valign="top">

    
<script type="text/javascript">

String.prototype.trim = function() {
        return this.replace(/^\s+|\s+$/g,"");
}
String.prototype.ltrim = function() {
        return this.replace(/^\s+/,"");
}
String.prototype.rtrim = function() {
        return this.replace(/\s+$/,"");
}

function validate_search() {
	if (document.search.id.value == "Search JSRs" || document.search.id.value.trim().length == 0) {
		alert("Search terms must be entered first");
		return false;
	}
	return true;
}

function validate_findjsr() {
	if (document.findjsr.id.value == "Search JSRs" || document.findjsr.id.value.trim().length == 0) {
		alert("Search terms must be entered first");
		return false;
	}
	return true;
}

function nullify_if_equal(field, str) {
	// alert("val=" + field.value);
	if (field.value == str) {
		field.value = "";
	}
}

</script>
<!-- ** END: header.jsp ** //-->






<html>
<head>
<title>
Changes for JDO Maintenance Review 1 
</title>
</head>
<body>
<h2><center>
These changes were proposed for JSR-000243 Java<font size="-2"><sup>TM</sup></font> Data Objects 2.0 - An Extension to the JDO Specification during its first Maintenance Review, and were approved on 21 November 2006.
</center>
</h2>

<table border width="100%">
<tr><td>

<PRE>
   1. In 5.4.1, Compound Identity should be updated to reflect that for key fields of reference types, the type of the key field is the reference type in the class but the oid of the reference type in the oid class.
   2. In Table 2: State Transitions, the transition for a transient-dirty instance during commit with DetachAllOnCommit = true should be to transient-clean. Also, state changes need to be added for detach methods and serialization.
   3. In 5.5.8 and 5.5.9, detachCopy should be removed from the list of methods that throw exceptions if applied to detached-clean or detached-dirty instances.
   4. In 6.4.3, change "Portable JDO applications must not depend on whether instances of these classes are treated as SCOs or FCOs. " to "Portable JDO applications must not depend on SCO or FCO uniquing behavior, nor on the storage mechanism in the datastore. Portable applications may use the same instance of these classes as field values in any persistence-capable class instance."

   5. In section 7.5, change "If the class is abstract, null is returned." to "If the class is abstract, JDOFatalInternalException is thrown".
   6. In section 7.5, add public byte fetchByteField(int fieldNumber); to ObjectIdFieldSupplier.
   7. In section 7.5, add public byte storeByteField(int fieldNumber, byte value); to ObjectIdFieldConsumer.
   8. In Chapter 8, add after class JDOHelper {
          * public JDOHelper();
          * For some usage patterns, an instance of JDOHelper on which to invoke methods is preferable to the use of static methods. For this purpose, a public constructor is provided.
   9. In Chapter 8, add a convenience method that returns a PersistenceManager proxy that can be used in web and ejb containers to dynamically bind to the transaction-associated PersistenceManager.
  10. In Chapter 9, add section on managing date formatting for ObjectIdentity constructors.
          * public synchronized void registerDateFormat(java.text.DateFormat df);
  11. In 9.4, add method to retrieve persistence-capable classes that have been registered.
          * public java.util.Collection getRegisteredClasses();
  12. In 9.5, add method to verify that the class is authorized to be a state manager.
          * public static void checkAuthorizedStateManagerClass(Class smClass);
  13. In 9.5, add method to register multiple state manager classes.
          * public static void registerAuthorizedStateManagerClasses(java.util.Collection smClasses) throws SecurityException;
  14. In Chapter 11, add properties for configuring PersistenceManagerFactory that are consistent with JPA specification of TransactionType and Persistence Unit Name.
  15. In Chapter 12, specify the behavior of PersistenceManager if it extends Serializable and writeObject is called.
  16. In 12.6.6, clarify that a JDOUserException will be thrown when invoking newInstance: if a class is not persistence-capable, or does not declare a public no-args constructor; if an interface is not persistence-capable or declares methods that are not defined as persistent properties; if an abstract class is not persistence-capable or declares abstract methods that are not defined as persistent properties.
  17. In 12.6.8, section heading Explicit Detach, the sentence "If the parameter instance is detached, then JDOUserException is thrown. " should be removed.
  18. In 12.6.8, add a note that serialization for storage using the serialized, serialized-element, serialized-key, or serialized-value metadata attributes does not create a detached instance.
  19. In 12.6.8, clarify the behavior of instances during serialization both with and without an active transaction.
  20. In 12.7.5, change public int setMaxFetchDepth(); to public int getMaxFetchDepth();
  21. In 12.7.5, specify that getFetchGroups returns a read-only copy of the active Fetch Groups.
  22. In 12.7.6, p. 127, change "A recursion-depth of 0 will fetch the whole graph of instances reachable from this field." to "A recursion-depth of -1 will fetch the whole graph of instances reachable from this field."
  23. In 12.7.6 p. 129, change fetch-depth to recursion-depth in the example.
  24. In 14, add subqueries to permit e.g. select from Employee where this.salary > (select avg(salary) from Employee)
  25. In 14.6.2 p. 159, the sectionheading "Methods" is not marked as a sectionheading.
  26. Add to 14.6.9: Projected SCOs are never owned, projected FCOs are always managed. Modifying unowned SCOs never has an effect on the database. Modifying FCOs no matter how you get them always has an effect if the tx commits.
  27. In 15.3, p. 187, the third paragraph, beginning "The field on the other side" and ending "in the next transaction", is duplicated and will be removed.
  28. In 15.3, add text to describe updating the other side of relationships where this side is deleted. This maintains referential integrity for delete as well as update.
  29. Add to 17.1.11
          * JDOUserCallbackException extends javax.jdo.JDOUserException
  30. In Chapter 18, add an xml element to specify the fetch plan to use for a query.
  31. In 18.15.1, change "(e.g. a field of type Object can specify field-type=?Integer?)." to "(e.g. an element of type Object can specify element-type=?Integer?).
  32. In Chapter 18, add to .jdo metadata:
          * &lt;!ATTLIST property field-type CDATA #IMPLIED&gt; 
  33. Add to 18.15.1 "The default for dependent-element is false."
  34. Add to 18.15.2 "The default for dependent-key is false."
  35. Add to 18.15.2 "The default for dependent-value is false."
  36. Change the last paragraph of 21.6 from "For Detachable classes, the results of restoring a serialized persistent instance graph is a graph of interconnected detached instances that might be attached via the attachCopy methods." to "For Detachable classes, the results of restoring a serialized persistent instance graph is a graph of interconnected detached instances that might be attached via the makePersistent methods."
  37. Change 21.13 from "Some methods require a non-null state manager. In these cases, if the jdoStateManager is null, then IllegalStateException is thrown." to "Some methods require a non-null state manager. In these cases, if the jdoStateManager is null, then JDOFatalInternalException is thrown."
  38. Change 21.21.7 Generated jdoGetManagedFieldCount sample implementation to avoid using the jdoFieldNames field that might be initialized after it is used during initialization of a subclass.
          * protected static int jdoGetManagedFieldCount () {  
          * return jdoFieldNames.length;
          * }
          * to
          * protected static int jdoGetManagedFieldCount () { 
          * return &lt;enhancer-generated constant&gt;;
          * }
  39. Add to Chapter 23, constants defined in the JDOPermission class:

          * public static final javax.jdo.spi.JDOPermission CLOSE_PERSISTENCE_MANAGER_FACTORY = "closePersistenceManagerFactory"; 
          * public static final javax.jdo.spi.JDOPermission GET_METADATA = "getMetadata";
          * public static final javax.jdo.spi.JDOPermission MANAGE_METADATA = "manageMetadata";
          * public static final javax.jdo.spi.JDOPermission SET_STATE_MANAGER = "setStateManager";
</PRE><P>
<h2>JDK 1.5 changes</h2>
<P>
These are changes proposed for JDO 2 to better support JDK 1.5.
<ol>
   <li>Add to 6.3 a section requiring support for enum types, including subclasses of enum types.
   <li> Change in 12.6 signatures of the following PersistenceManager methods to be generic. Note that these changes are source compatible with existing application programs.
   <table border><tr><td>  o JDO 2.0</td>
   <td> 	JDO 2.1</td></tr>
   <tr><TD> Object getObjectById (Class cls, Object key)</TD>
   <td> 	&lt;T&gt; T getObjectById (Class&lt;T&gt; cls, Object key)</td></tr>
   <tr><td> Object newInstance(Class persistenceCapable)</td>
   <td> 	&lt;T&gt; T newInstance(Class&lt;T&gt; persistenceCapable)</td></tr>
   <tr><td> Object makePersistent (Object pc)</td>
<td> 	&lt;T&gt; T makePersistent (T pc)</td></tr>
  <tr><td> Object[ ] makePersistentAll (Object[ ] pcs)</td>
  <td> 	&lt;T&gt; T[ ] makePersistentAll (T[ ] pcs)</td></tr>
  <tr><td> Collection makePersistentAll (Collection pcs)</td>
  <td> 	&lt;T&gt; Collection&lt;T&gt; makePersistentAll (Collection&lt;T&gt; pcs)</td></tr>
  <tr><td> Object detachCopy(Object pc)</td>
  <td> 	&lt;T&gt; T detachCopy(T pc)</td></tr>
  <tr><td> Collection detachCopyAll(Collection pcs)</td>
  <td> 	&lt;T&gt; Collection&lt;T&gt; detachCopyAll(Collection&lt;T&gt; pcs)</td></tr>
  <tr><td> Object[ ] detachCopyAll(Object[ ] pcs)</td>
  <td> 	&lt;T&gt; T[ ] detachCopyAll(T[ ] pcs)</td></tr>
</table>

  <li> Add to 15.1 a paragraph describing that mapping an enum to a fixed-precision numeric type uses the ordinal() value for storage; mapping to a character column type (CHAR, VARCHAR, etc.) uses the name() value for storage; mapping to any other column type is an error.
  <li> Provide in a new chapter a set of annotations that map directly to xml elements as an alternative to using xml metadata. Describe how jdo implementations can use either JDO annotations or JPA annotations to provide metadata.
  <li> Provide interfaces that extend both JDO and JPA in order to make it easier to migrate applications from JDO to JPA.</td></tr>
</ol>
</table>




</body>
</html>



<!-- ** BEGIN: footer.jsp ** //-->








</td>
</tr>
</table>

<!-- ** END: Content Table ** //-->

<!-- ** BEGIN: Footer Table ** //-->

<div id="footer" style="clear: both;">
    <div class="footleft">
        <a href="/en/resources/contacts">Contact Us</a>
    </div>
	
    <div class="botbar"><img src="/images/spacer.gif" alt="" height="23" width="1"></div>

    <div class="footleft2">
         &copy; 2019, Oracle Corporation and/or its affiliates. 
        <a href="/en/home/terms">Terms of Use</a>. <a href="http://www.oracle.com/us/legal/privacy/index.html">Privacy Policy</a>. <a href="http://www.oracle.com/us/legal/third-party-trademarks/third-party-trademarks-078568.html">Trademarks</a>
    </div>

    <div class="footright">
        <img src="/images/common/logo_oracle_footer.gif" alt="Oracle Corporation" height="22" width="91">
    </div>

    <div style="clear: both;"><img src="/images/spacer.gif" alt="" height="30" width="1"></div>
</div>

<!-- ** END: Footer Table ** //-->



<!-- ** Menu Start ** //-->



</body>
</html>
<!-- ** END: footer.jsp ** //-->

