
<!-- ** BEGIN: header.jsp ** //-->






















<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3c.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
<head>
    

   
    <link href="/includes/css/menu.css" rel="stylesheet" type="text/css"></link>
    <link href="/includes/css/style.css" rel="stylesheet" type="text/css"></link>
    <!--[if lt IE 6]><link href="/includes/css/style5.css" rel="stylesheet" type="text/css" ></link><![endif]-->
    <!--[if gte IE 5]><link href="/includes/css/style6.css" rel="stylesheet" type="text/css" ></link><![endif]-->
    <link href="/includes/css/tabs.css"  rel="stylesheet" type="text/css"></link>

    <script type="text/javascript" src="/includes/scripts/tabs.js"></script>
    <script type="text/javascript" src="/includes/scripts/menu.js"></script>
   

    

    
        <title>The Java Community Process(SM) Program - communityprocess - jsr</title>
    

    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>



<body onload="P7_initPM(0,1,0,0,-1)">

    <a name="top"></a>

    <div id="header">
	<div id="logo">
		<a href="/en/home/index"><img src="/images/spacer.gif" alt="Java Community Process" height="81" width="151"></a>
	</div>
	<div id="tools">
		<div class="search">
			<form name="search" action="/en/jsr/summary" method="get" onsubmit="return validate_search()">
				<input name="id" value="Search JSRs" size="16" class="form" onfocus="nullify_if_equal(this, 'Search JSRs')" type="text">
				<a href="javascript:document.search.submit()" onclick="return validate_search()"><img src="/images/button_go.gif" width="21" height="16" border="0" alt="Submit this Search" name="sub_search"></a>
			</form>
		</div>
		<div class="tools">
			<a href="/en/press/pressroom">Press Room</a> &nbsp;|&nbsp;
			<a href="http://java.com/java/download/index.jsp?cid=jdp78399">Get Java Here</a> &nbsp;|&nbsp;
			<!-- <a href="javascript:void(0)">Print Format</a> &nbsp;|&nbsp;&nbsp; -->
		</div>

	</div>
	<div style="clear: right;"></div>

        

	<div class="topbar"><img src="/images/spacer.gif" alt="" height="3" width="154"></div>
	<div id="update"> </div>
    </div>


    

        <!-- ** BEGIN: Content Table ** //-->

        <table width="100%" border="0" cellpadding="0" cellspacing="0">

            <tr>

                <!-- ** BEGIN: Navigation Column ** //-->
                <td width="150" id="leftcontent" valign="top">
                    <!-- Navigation Placeholder //-->

                    

                    <div class="bar"><img src="/images/hr_dots1.gif" alt="" height="3" width="150"></div>

        <!-- begin find JSRs form -->
        <!-- IMPORTANT! do not convert this form to Struts < html : form > tag.  javascript change of form.action property fails. -->
        <img src="/images/hd_find-jsrs.gif" alt="Find JSRs" height="18" width="150">
        <form name="findjsr" action="/en/jsr/summary" method="get" class="pt5" onsubmit="return validate_findjsr()">
            <input name="id" size="18" class="form" value="Search JSRs" onfocus="nullify_if_equal(this, 'Search JSRs')" type="text">
	    <a href="javascript:document.findjsr.submit()" onclick="return validate_findjsr()"><img src="/images/button_go.gif" width="21" height="16" border="0" alt="Submit this Search" name="sub_search"></a>
        </form><br><br>

        <!-- ** Menu Start ** //-->

        <ul id="p7PMnav">
            <li><a href="/en/jsr/platform">JSRs by Platform</a></li>
            <li><a href="/en/jsr/tech">JSRs by Technology</a></li>
            <li><a href="/en/jsr/stage">JSRs by Stage</a></li>
            <li><a href="/en/jsr/ec">JSRs by Committee</a></li>
            <li><a href="/en/jsr/all">List of All JSRs</a></li>

            <!--end find JSRs form -->
            <div style="clear: both;"><img src="/images/spacer.gif" alt="" height="25" width="1"></div>

            <!--begin my JCP -->
            <img src="/images/hd_my-jcp.gif" alt="My JCP" height="18" width="150">
            

          <form name="login" method="get" action="/en/user/login" >
            <input name="Sign-in" type="submit" title="Sign-in" value="Sign-in" />
          </form>

            <div style="clear:both"><img src="/images/global/spacer.gif" width="1" height="3" alt=""></div>
            <div class="noNav">
                <a href="/en/user/register">Register for Site</a>
            </div>

             <div class="bar"><img src="/images/hr_dots1.gif" alt="" height="3" width="150"></div>
           <div class="noNav" style="color: #666666; padding: 0;">
              Use of JCP site is subject to the
              <a href="/en/home/terms" style="display:inline;padding: 0">JCP Terms of Use</a> and the
              <a href="http://www.oracle.com/us/legal/privacy/index.html" style="display:inline;padding: 0" href="">Oracle Privacy Policy</a>
          </div>

            

            <div style="clear:both"><img src="/images/global/spacer.gif" width="1" height="25" alt=""></div>

            <!--begin JCP info -->
            <img src="/images/hd_jcp-info.gif" alt="JCP Info" height="18" width="150">

            <li><a href="/en/procedures/overview" class="p7PMtrg">About JCP</a>
                <ul>
                    <li><a href="/en/procedures/overview">Program Overview</a></li>
                    <li><a href="/en/procedures/jcp2">JCP Process Document</a></li>
                    <li><a href="/en/whatsnew/calendar">Calendar</a></li>
                    <li><a href="/en/participation/members">JCP Members</a></li>
                    <li><a href="/en/participation/committee">Executive Committee</a></li>
                    <li><a href="/en/whatsnew/elections">Elections</a></li>
                </ul>
            </li>

            <li><a href="/en/participation/overview" class="p7PMtrg">Get Involved</a>
		<ul>
                    <li><a href="/en/participation/overview">Overview</a></li>
                    <li><a href="/en/participation/membership">Becoming a JCP Member</a></li>
		</ul>
            </li>

            <li><a href="/en/resources/contents" class="p7PMtrg">Community Resources</a>
                <ul>
                    <li><a href="/en/resources/contents">Overview</a></li>
                    <li><a href="/en/resources/tutorials">Tutorials</a></li>
                    <li><a href="/en/resources/multimedia">JCP Podcasts</a></li>
                    <li><a href="/en/resources/guide">Spec Lead Guide</a></li>
                    <li><a href="/en/resources/tdk">TCK Tool & Info</a></li>
                    <li><a href="/en/resources/license_reference">License Reference</a></li>
                </ul>
            </li>

            <li><a href="/en/press/pmo" class="p7PMtrg">Community News</a>
                <ul>
                    <li><a href="/en/press/pmo">News</a></li>
                    <li><a href="/en/press/news/awards/awards_main">Programs &amp; Awards</a></li>
                    <li><a href="/en/press/releases">Press Releases</a></li>
                    <li><a href="/en/press/success">Success Stories</a></li>
                </ul>
            </li>

            <li><a href="/en/introduction/faq">FAQ</a></li>

            <li><a href="/en/resources/contacts">Contact Us</a></li>

            <div style="clear: both;"><img src="/images/spacer.gif" alt="" height="25" width="1"></div>

            <!--[if lte IE 6]><style>#p7PMnav a{height:1em;}#p7PMnav li{height:1em;float:left;clear:both;width:100%}</style><![endif]-->
            <!--[if IE 6]><style>#p7PMnav li{clear:none;}</style><![endif]-->
            <!--[if IE 7]><style>#p7PMnav a{zoom:100%;}#p7PMnav li{float:left;clear:both;width:100%;}</style><![endif]-->
        </ul>

        

        <!--begin ad space -->
        <div class="ads">
            <a href="http://java.com/java/download/index.jsp?cid=jdp78399" target="_blank"><img style="display: ;" src="/images/ad_banner2.gif" alt="Ad Banner" border="1" height="70" width="150"></a>
        </div>
        <!--end ad space -->

<!-- ** Menu End ** //-->
&nbsp;<br>
&nbsp;<br>
&nbsp;<br>

    

                    &nbsp;<br>
                    <img src="/images/common/trans.gif" alt="" width="1" height="150"><br>

              



                </td>
                <!-- ** END: Navigation Column ** //-->

                <!-- ** BEGIN: Gutter Column ** //-->
		<td width="10" nowrap><img src="/images/common/trans.gif" alt="" width="10" height="1"></td>
                <!-- ** END: Gutter Column ** //-->

                <!-- ** BEGIN: Content Column ** //-->
                <td width="100%" valign="top">

    
<script type="text/javascript">

String.prototype.trim = function() {
        return this.replace(/^\s+|\s+$/g,"");
}
String.prototype.ltrim = function() {
        return this.replace(/^\s+/,"");
}
String.prototype.rtrim = function() {
        return this.replace(/\s+$/,"");
}

function validate_search() {
	if (document.search.id.value == "Search JSRs" || document.search.id.value.trim().length == 0) {
		alert("Search terms must be entered first");
		return false;
	}
	return true;
}

function validate_findjsr() {
	if (document.findjsr.id.value == "Search JSRs" || document.findjsr.id.value.trim().length == 0) {
		alert("Search terms must be entered first");
		return false;
	}
	return true;
}

function nullify_if_equal(field, str) {
	// alert("val=" + field.value);
	if (field.value == str) {
		field.value = "";
	}
}

</script>
<!-- ** END: header.jsp ** //-->






<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>An enhanced <tt>for</tt> loop for the Java&trade; Programming Language</TITLE></HEAD>

<body bgcolor="#ffffff">
<center>
<h2>An enhanced <tt>for</tt> loop for the Java&trade; Programming Language</h2>
</center>
<hr>
<br>&nbsp;

<H2>I. Introduction</H2>

The current <tt>for</tt> loop construct is powerful, but somewhat ill-suited
to iteration over collections.  The standard idiom to iterate over a
collection is somewhat verbose:
<pre>
    for (Iterator i = c.iterator(); i.hasNext(); ) {  // No <i>ForUpdate</i>
        String s = (String) i.next();
        ...
    }
</pre>
The situation is made little better with the addition of generics:
<pre>
    for (Iterator&lt;String&gt; i = c.iterator(); i.hasNext(); ) {
        String s = i.next();
        ...
    }
</pre>
We propose a second form of the <tt>for</tt> loop specifically designed for
iteration over collections and arrays.  Traditionally this
is done using a <tt>foreach</tt> keyword, but it seems unnecessary and
counterproductive to add a keyword at this late date. Under the the syntax of
this proposal, the above code could be replaced by this:
<pre>
    for (String s : c) {
        ...
    }
</pre>
Similarly, the following code could be used to calculate the sum of an
<tt>int</tt> array.
<pre>
    int sum = 0;
    for (int e : a)  // e is short for element; i would be confusing
        sum += e;
</pre>
This proposal affects only the compiler; it demands no support from the VM.
It does not require a new keyword and is fully compatible with all
preexisting programs.   The construct interacts harmoniously with
existing elements of the language.  For example, abrupt completion of an
enhanced <tt>for</tt> statement is handled exactly like abrupt completion of
any other <tt>for</tt> statement.
<H2>II. Syntax</H2>
The following description is not up to JLS standards, but should be
good enough for present purposes.  The new form of the <tt>for</tt> statement
is governed by the following production:

<PRE> 
   <I>EnhancedForStatement:</I>
        for ( <I>Type Identifier</I> : <I>Expression</I> )
            <I>Statement</I>
</PRE>

<I>Expression</I> must be an instance of a new interface called
<tt>java.lang.Iterable</tt>, or an array.  The interface
<tt>java.util.Collection</tt> (and perhaps a few other interfaces or classes)
will be retrofitted to extend (or implement) <tt>java.lang.Iterable</tt>:
<pre>
package java.lang;

public class Iterable {
    /**
     * Returns an iterator over the elements in this collection.  There are no
     * guarantees concerning the order in which the elements are returned
     * (unless this collection is an instance of some class that provides a
     * guarantee).
     * 
     * @return an <tt>Iterator</tt> over the elements in this collection.
     */
    SimpleIterator iterator();
}
</pre>

The interface <tt>java.util.Iterator</tt> will be retrofitted to implement a
new interface <tt>java.lang.ReadOnlyIterator</tt>:
<pre>
package java.lang;

public interface ReadOnlyIterator {
    /**
     * Returns <tt>true</tt> if the iteration has more elements. (In other
     * words, returns <tt>true</tt> if <tt>next</tt> would return an element
     * rather than throwing an exception.)
     *
     * @return <tt>true</tt> if the iterator has more elements.
     */
    boolean hasNext();

    /**
     * Returns the next element in the iteration.
     *
     * @return the next element in the iteration.
     * @exception NoSuchElementException iteration has no more elements.
     */
    Object next();
}
</pre>
These new interfaces serve to prevent the dependency of the language on
<tt>java.util</tt> that would otherwise result.  Note that that they rely on
<i>covariant return types</i>, which will be introduced as a part of support
for generics (JSR-14).

<H2>II. Semantics</H2>
(Again, not up to JLS standards.)  If <I>Expression</I> is an instance of
<tt>java.util.Collection</tt>, the enhanced <tt>for</tt> statement is
shorthand for this:

<PRE>
    for ( Iterator</tt>&lt;<i>T</i>&gt; $i = <I>Expression</I>.iterator(); $i.hasNext(); ) {
        <I>Type Identifier</I> = $i.next();
        <I>Statement</I>
    }
</PRE>
The identifier <tt>$i</tt> is used to indicate some synthetic variable name
chosen by the compiler so as not to conflict with any other natural or
synthetic variable name.  The type <i>T</i> differs depending on whether 
<I>Expression</I> has a <i>raw type</i> or a <i>parameterized type</i>.
If  <I>Expression</I> has a raw type, <i>T</i> is <i>Type</i>; if 
<I>Expression</I> has a parameterized type, <i>T</i> is the the type
parameter of <I>Expression</I>.
<p>
Note that the cast may generate a warning or error: if <I>Expression</I> has a
raw type, then an <i>unchecked assignment</i> warning will be
generated, correctly implying that the implicit cast may fail.  If
<I>Expression</I> has a <i>parameterized type</i>, the statement will generate
a compilation error if the type parameter cannot be converted to
<i>Type</i> by assignment conversion (JLS 5.2).
<p>
If <I>Expression</I> is an array, the enhanced <tt>for</tt> statement is
shorthand for this:
<PRE>
{
    <i>Type</i>[] $a = <i>Expression</i>;

    <i>L<sub>1</sub>: L<sub>2</sub>: ... L<sub>m</sub>:</i>

    for (int $i = 0; $i &lt; $a.length; $i++) {
        <I>Type Identifier</I> = $a[ $i ] ;
        <I>Statement</I>
    }
}
</PRE>
The identifier <tt>$a</tt> is used to indicate some synthetic variable name
chosen by the compiler so as not to conflict with any other natural or
synthetic variable name.  The possibly empty sequence of labels preceding the
enhanced <tt>for</tt> loop is represented by <tt><i>L<sub>1</sub>:
L<sub>2</sub>: ... L<sub>m</sub></i></tt>.  This sequence is moved beyond the
assignment to<tt>$a</tt> so that <tt>continue</tt> and <tt>break</tt> statements with labels will work properly.
<p>
The array form of the enhanced <tt>for</tt> statement will generate a
compilation error if the array element type cannot be converted to <i>Type</i>
by assignment conversion (JLS 5.2).
</ol>
<font size=-2>
Copyright 2000-2001 Sun Microsystems, Inc., 901 San Antonio Road, Palo Alto, California 94303 U.S.A. All rights reserved.
</font>
</BODY></HTML>



<!-- ** BEGIN: footer.jsp ** //-->








</td>
</tr>
</table>

<!-- ** END: Content Table ** //-->

<!-- ** BEGIN: Footer Table ** //-->

<div id="footer" style="clear: both;">
    <div class="footleft">
        <a href="/en/resources/contacts">Contact Us</a>
    </div>
	
    <div class="botbar"><img src="/images/spacer.gif" alt="" height="23" width="1"></div>

    <div class="footleft2">
         &copy; 2019, Oracle Corporation and/or its affiliates. 
        <a href="/en/home/terms">Terms of Use</a>. <a href="http://www.oracle.com/us/legal/privacy/index.html">Privacy Policy</a>. <a href="http://www.oracle.com/us/legal/third-party-trademarks/third-party-trademarks-078568.html">Trademarks</a>
    </div>

    <div class="footright">
        <img src="/images/common/logo_oracle_footer.gif" alt="Oracle Corporation" height="22" width="91">
    </div>

    <div style="clear: both;"><img src="/images/spacer.gif" alt="" height="30" width="1"></div>
</div>

<!-- ** END: Footer Table ** //-->



<!-- ** Menu Start ** //-->



</body>
</html>
<!-- ** END: footer.jsp ** //-->

