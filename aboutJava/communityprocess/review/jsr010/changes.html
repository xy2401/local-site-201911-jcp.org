
<!-- ** BEGIN: header.jsp ** //-->






















<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3c.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
<head>
    

   
    <link href="/includes/css/menu.css" rel="stylesheet" type="text/css"></link>
    <link href="/includes/css/style.css" rel="stylesheet" type="text/css"></link>
    <!--[if lt IE 6]><link href="/includes/css/style5.css" rel="stylesheet" type="text/css" ></link><![endif]-->
    <!--[if gte IE 5]><link href="/includes/css/style6.css" rel="stylesheet" type="text/css" ></link><![endif]-->
    <link href="/includes/css/tabs.css"  rel="stylesheet" type="text/css"></link>

    <script type="text/javascript" src="/includes/scripts/tabs.js"></script>
    <script type="text/javascript" src="/includes/scripts/menu.js"></script>
   

    

    
        <title>The Java Community Process(SM) Program - communityprocess - review</title>
    

    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>



<body onload="P7_initPM(0,1,0,0,-1)">

    <a name="top"></a>

    <div id="header">
	<div id="logo">
		<a href="/en/home/index"><img src="/images/spacer.gif" alt="Java Community Process" height="81" width="151"></a>
	</div>
	<div id="tools">
		<div class="search">
			<form name="search" action="/en/jsr/summary" method="get" onsubmit="return validate_search()">
				<input name="id" value="Search JSRs" size="16" class="form" onfocus="nullify_if_equal(this, 'Search JSRs')" type="text">
				<a href="javascript:document.search.submit()" onclick="return validate_search()"><img src="/images/button_go.gif" width="21" height="16" border="0" alt="Submit this Search" name="sub_search"></a>
			</form>
		</div>
		<div class="tools">
			<a href="/en/press/pressroom">Press Room</a> &nbsp;|&nbsp;
			<a href="http://java.com/java/download/index.jsp?cid=jdp78399">Get Java Here</a> &nbsp;|&nbsp;
			<!-- <a href="javascript:void(0)">Print Format</a> &nbsp;|&nbsp;&nbsp; -->
		</div>

	</div>
	<div style="clear: right;"></div>

        

	<div class="topbar"><img src="/images/spacer.gif" alt="" height="3" width="154"></div>
	<div id="update"> </div>
    </div>


    

        <!-- ** BEGIN: Content Table ** //-->

        <table width="100%" border="0" cellpadding="0" cellspacing="0">

            <tr>

                <!-- ** BEGIN: Navigation Column ** //-->
                <td width="150" id="leftcontent" valign="top">
                    <!-- Navigation Placeholder //-->

                    

                    <div class="bar"><img src="/images/hr_dots1.gif" alt="" height="3" width="150"></div>

        <!-- begin find JSRs form -->
        <!-- IMPORTANT! do not convert this form to Struts < html : form > tag.  javascript change of form.action property fails. -->
        <img src="/images/hd_find-jsrs.gif" alt="Find JSRs" height="18" width="150">
        <form name="findjsr" action="/en/jsr/summary" method="get" class="pt5" onsubmit="return validate_findjsr()">
            <input name="id" size="18" class="form" value="Search JSRs" onfocus="nullify_if_equal(this, 'Search JSRs')" type="text">
	    <a href="javascript:document.findjsr.submit()" onclick="return validate_findjsr()"><img src="/images/button_go.gif" width="21" height="16" border="0" alt="Submit this Search" name="sub_search"></a>
        </form><br><br>

        <!-- ** Menu Start ** //-->

        <ul id="p7PMnav">
            <li><a href="/en/jsr/platform">JSRs by Platform</a></li>
            <li><a href="/en/jsr/tech">JSRs by Technology</a></li>
            <li><a href="/en/jsr/stage">JSRs by Stage</a></li>
            <li><a href="/en/jsr/ec">JSRs by Committee</a></li>
            <li><a href="/en/jsr/all">List of All JSRs</a></li>

            <!--end find JSRs form -->
            <div style="clear: both;"><img src="/images/spacer.gif" alt="" height="25" width="1"></div>

            <!--begin my JCP -->
            <img src="/images/hd_my-jcp.gif" alt="My JCP" height="18" width="150">
            

          <form name="login" method="get" action="/en/user/login" >
            <input name="Sign-in" type="submit" title="Sign-in" value="Sign-in" />
          </form>

            <div style="clear:both"><img src="/images/global/spacer.gif" width="1" height="3" alt=""></div>
            <div class="noNav">
                <a href="/en/user/register">Register for Site</a>
            </div>

             <div class="bar"><img src="/images/hr_dots1.gif" alt="" height="3" width="150"></div>
           <div class="noNav" style="color: #666666; padding: 0;">
              Use of JCP site is subject to the
              <a href="/en/home/terms" style="display:inline;padding: 0">JCP Terms of Use</a> and the
              <a href="http://www.oracle.com/us/legal/privacy/index.html" style="display:inline;padding: 0" href="">Oracle Privacy Policy</a>
          </div>

            

            <div style="clear:both"><img src="/images/global/spacer.gif" width="1" height="25" alt=""></div>

            <!--begin JCP info -->
            <img src="/images/hd_jcp-info.gif" alt="JCP Info" height="18" width="150">

            <li><a href="/en/procedures/overview" class="p7PMtrg">About JCP</a>
                <ul>
                    <li><a href="/en/procedures/overview">Program Overview</a></li>
                    <li><a href="/en/procedures/jcp2">JCP Process Document</a></li>
                    <li><a href="/en/whatsnew/calendar">Calendar</a></li>
                    <li><a href="/en/participation/members">JCP Members</a></li>
                    <li><a href="/en/participation/committee">Executive Committee</a></li>
                    <li><a href="/en/whatsnew/elections">Elections</a></li>
                </ul>
            </li>

            <li><a href="/en/participation/overview" class="p7PMtrg">Get Involved</a>
		<ul>
                    <li><a href="/en/participation/overview">Overview</a></li>
                    <li><a href="/en/participation/membership">Becoming a JCP Member</a></li>
		</ul>
            </li>

            <li><a href="/en/resources/contents" class="p7PMtrg">Community Resources</a>
                <ul>
                    <li><a href="/en/resources/contents">Overview</a></li>
                    <li><a href="/en/resources/tutorials">Tutorials</a></li>
                    <li><a href="/en/resources/multimedia">JCP Podcasts</a></li>
                    <li><a href="/en/resources/guide">Spec Lead Guide</a></li>
                    <li><a href="/en/resources/tdk">TCK Tool & Info</a></li>
                    <li><a href="/en/resources/license_reference">License Reference</a></li>
                </ul>
            </li>

            <li><a href="/en/press/pmo" class="p7PMtrg">Community News</a>
                <ul>
                    <li><a href="/en/press/pmo">News</a></li>
                    <li><a href="/en/press/news/awards/awards_main">Programs &amp; Awards</a></li>
                    <li><a href="/en/press/releases">Press Releases</a></li>
                    <li><a href="/en/press/success">Success Stories</a></li>
                </ul>
            </li>

            <li><a href="/en/introduction/faq">FAQ</a></li>

            <li><a href="/en/resources/contacts">Contact Us</a></li>

            <div style="clear: both;"><img src="/images/spacer.gif" alt="" height="25" width="1"></div>

            <!--[if lte IE 6]><style>#p7PMnav a{height:1em;}#p7PMnav li{height:1em;float:left;clear:both;width:100%}</style><![endif]-->
            <!--[if IE 6]><style>#p7PMnav li{clear:none;}</style><![endif]-->
            <!--[if IE 7]><style>#p7PMnav a{zoom:100%;}#p7PMnav li{float:left;clear:both;width:100%;}</style><![endif]-->
        </ul>

        

        <!--begin ad space -->
        <div class="ads">
            <a href="http://java.com/java/download/index.jsp?cid=jdp78399" target="_blank"><img style="display: ;" src="/images/ad_banner2.gif" alt="Ad Banner" border="1" height="70" width="150"></a>
        </div>
        <!--end ad space -->

<!-- ** Menu End ** //-->
&nbsp;<br>
&nbsp;<br>
&nbsp;<br>

    

                    &nbsp;<br>
                    <img src="/images/common/trans.gif" alt="" width="1" height="150"><br>

              



                </td>
                <!-- ** END: Navigation Column ** //-->

                <!-- ** BEGIN: Gutter Column ** //-->
		<td width="10" nowrap><img src="/images/common/trans.gif" alt="" width="10" height="1"></td>
                <!-- ** END: Gutter Column ** //-->

                <!-- ** BEGIN: Content Column ** //-->
                <td width="100%" valign="top">

    
<script type="text/javascript">

String.prototype.trim = function() {
        return this.replace(/^\s+|\s+$/g,"");
}
String.prototype.ltrim = function() {
        return this.replace(/^\s+/,"");
}
String.prototype.rtrim = function() {
        return this.replace(/\s+$/,"");
}

function validate_search() {
	if (document.search.id.value == "Search JSRs" || document.search.id.value.trim().length == 0) {
		alert("Search terms must be entered first");
		return false;
	}
	return true;
}

function validate_findjsr() {
	if (document.findjsr.id.value == "Search JSRs" || document.findjsr.id.value.trim().length == 0) {
		alert("Search terms must be entered first");
		return false;
	}
	return true;
}

function nullify_if_equal(field, str) {
	// alert("val=" + field.value);
	if (field.value == str) {
		field.value = "";
	}
}

</script>
<!-- ** END: header.jsp ** //-->






<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>Changes to Preferences API Since Original JSR</TITLE></HEAD>

<body bgcolor="#ffffff">
<h1>Changes to Preferences API Since Original JSR</h1>

There have been many changes to this API since the original JSR (JSR-10).
This list is not complete, but it should give the reader a good idea of the 
differences:
<ol>
<li>Added support for per-system preferences.

<br>&nbsp;<li>Eliminated forClass method. We we unable to come up with compelling
guidelines as to when it is appropriate to use forClass in preference to
forPackage, so we opted to eliminate the former.

<br>&nbsp;<li>Added support for long, float and double and byte array preferences.

<br>&nbsp;<li>Specified that <tt>getBoolean</tt> was case-insensitive.

<br>&nbsp;<li>Restricted maximum size of a preference value to 8K characters.  This
implicitly restricts byte array values to 6K bytes (because of the nominal
RFC 2045 Base64 encoding).

<br>&nbsp;<li>Changed the name of the method <tt>fullName</tt> to <tt>absolutePath</tt>,
for improved consistency with File.

<br>&nbsp;<li>Made it mandatory that once a node has been successfully removed,
attempting any operation on the corresponding Preferences object will fail
with an IllegalStateOperation, with the exception of the <tt>name</tt> and
<tt>absolutePath</tt> methods.  (These two methods are useful from within a
NodeChangeEvent, once the node has been removed.)

<br>&nbsp;<li>Eliminated use of <tt>java.beans.PropertyChangeListener</tt> in favor of
new class <tt>PreferenceChangeListener</tt>.  Added corresponding event class 
(<tt>PreferenceChangeEvent</tt>), and renamed add- and remove- listener methods
appropriately.

<br>&nbsp;<li>Added a type-safe convenience method to each change event returning the
"source" as a <tt>Preferences</tt> Object.  For
<tt>PreferenceChangeEvent</tt>, it's <tt>getNode</tt>.  For
<tt>NodeChangeEvent</tt>, it's <tt>getParent</tt>. 

<br>&nbsp;<li>Replaced <tt>NodeChangeEvent</tt>'s <tt>getNodeName</tt> method with a
<tt>getChild</tt> method, which returns a <tt>Preferences</tt> object (rather
than a string name).

<br>&nbsp;<li>Disallowed the empty String (<tt>""</tt>) as node name for nodes other than
the root node. (This was already implicit in the spec but needed to be made
explicit.)

<br>&nbsp;<li>Clarified the circumstances under which the methods in
<tt>Preferences</tt> throw a <tt>NullPointerException</tt>.

<br>&nbsp;<li>Clarified that it is possible to use the API even when the backing store
is inaccessible.

<br>&nbsp;<li>Clarified that an implementation is free to persist the results before
<tt>flush</tt> is called.

<br>&nbsp;<li>Made it mandatory that the refresh method flushes pending updates
to prevent uncommitted changes from being lost.  The resulting call is
essentially, a "sync", so we renamed it.

<br>&nbsp;<li>Eliminated Preferences's no-args constructor and <tt>init</tt> method
(whose only use was to allow serializable Preferences subclasses).

<br>&nbsp;<li>Clarified that <tt>keys</tt> method does return non-overridden stored
defaults.

<br>&nbsp;<li>Eliminated restriction that multiple retrievals of the same node
must return Preferences objects that are identical object references.

<br>&nbsp;<li>Greatly expanded SPI and moved all of its methods to a subclass
(<tt>AbstractPreferences</tt>).  Skeletal implementation automatically takes
care of locking, generation of <tt>IllegalStateException</tt>,
<tt>IllegalArgumentException</tt>, and many similar things.

<br>&nbsp;<li>Moved some implementors' notes from <tt>Preferences</tt> to
<tt>AbstractPreferences</tt>, and eliminated others.

<br>&nbsp;<li>Replaced use of <tt>IOException</tt> with (new)
<tt>BackingStoreException</tt>.

<br>&nbsp;<li>Changed return values of <tt>put(String, String)</tt> and
<tt>remove(String)</tt> methods not to give you old value, so that they can be
used when the backing store is not available.  (This may also improve
performance.)

<br>&nbsp;<li>As a consequence of previous change, modified
<tt>PreferenceChangeEvent</tt> not to provide <tt>oldValue</tt>.  (It's
possible to emulate the old behavior if you really want to.)

<br>&nbsp;<li>Modified <tt>keys(), children(), nodeExists(String), removeNode(String),
clear()</tt> to throw BackingStoreException.  For the first four, this is
necessary; they cannot, in general, get the specified return value if the
repository is unavailable.  (For <tt>clear()</tt>, it is as much a convenience
for implementers as anything else.)

<br>&nbsp;<li>Added spec for <tt>toString</tt>.

<br>&nbsp;<li>Added clarification that it is not necessary to do a <tt>flush</tt>
prior to JVM termination.

<br>&nbsp;<li>Added <tt>PreferencesFactory</tt> interface to enable support of multiple
user preference trees in a single VM.

<br>&nbsp;<li>Changed package name to <tt>java.util.prefs</tt>

<br>&nbsp;<li>Added XML-based import/export facility.

<br>&nbsp;<li>Wrote "proof-of-concept" implementation (<tt>SimplePreferences</tt>) based
on import/export facility.  (Not really an API change.)

<br>&nbsp;<li>Modified the protocol whereby <tt>removeChild</tt> is called by
<tt>removeNode</tt>: now it is called for each node in the subtree, in
bottom-up order.

<br>&nbsp;<li>Replaced removeNode(String) with removeNode().  There was no compelling
reason to pass in the string, and it was ungainly.

<br>&nbsp;<li>Renamed <tt>children</tt> method to <tt>childrenNames</tt> and changed its
behavior to return an array containing the names of this nodes children
instead of the nodes themselves.  This improves performance.

<br>&nbsp;<li>Modified <tt>AbstractPreferences.childrenSpi</tt> to return the <i>names</i>
of the children, rather than the children themselves.  This pushes the
translation work "up the hierarchy" out of the individual preferences
implementations and into <tt>AbstractPreferences</tt>.

<br>&nbsp;<li>Added a new <tt>(Throwable)</tt> constructor to
<tt>BackingStoreException</tt>, as it will typically be a "chained exception."

<br>&nbsp;<li>Modified <tt>AbstractPreferences.removeNodeSpi()</tt> to throw
BackingStoreException, as <tt>removeNode</tt> throws this exception.

<br>&nbsp;<li>Removed <tt>newNode</tt> param from <tt>AbstractPreferences</tt> constructor.
Replaced it with protected field, which subclass constructor is obligated to
set if appropriate.

<br>&nbsp;<li>DTD for exported form: modified root and node to <i>require</i> a map, and
modified map to contain entry* instead of entry+.  This is cleaner, and
results in much cleaner XML support code.  Also modified preferences to
<i>require</i> a root.

<br>&nbsp;<li>Change name of node conventionally associated with programs in the
unnamed package from <tt>"<temporary>"</tt> to <tt>"<unnamed>"</tt>.

<br>&nbsp;<li>Replaced line number support in <tt>InvalidPreferencesFormatException</tt> with
nested exception ("cause") support.

<br>&nbsp;<li>Change <tt>AbstractPreferences.get</tt> implementation so that if
<tt>getSpi(String)</tt> throws an exception, it is caught, and the default
is returned from <tt>get(String)</tt>.

<br>&nbsp;<li>Wrote a discussion on the correct exception behavior of the
SPI calls in <tt>AbstractPreferences</tt>.

<br>&nbsp;<li>Described locking behavior of <tt>AbstractPreferences.isRemoved</tt>.

<br>&nbsp;<li>Modified <tt>sync</tt> spec to allow call on removed node.

<br>&nbsp;<li>Added automatic change notification to
<tt>AbstractPreferences.node(String)</tt> implementation description.

<br>&nbsp;<li>Numerous minor API clarifications.
</ol>

<font size=-2>
Copyright 2000 Sun Microsystems, Inc., 901 San Antonio Road, Palo Alto, California 94303 U.S.A. All rights reserved.
</font>
</BODY></HTML>



<!-- ** BEGIN: footer.jsp ** //-->








</td>
</tr>
</table>

<!-- ** END: Content Table ** //-->

<!-- ** BEGIN: Footer Table ** //-->

<div id="footer" style="clear: both;">
    <div class="footleft">
        <a href="/en/resources/contacts">Contact Us</a>
    </div>
	
    <div class="botbar"><img src="/images/spacer.gif" alt="" height="23" width="1"></div>

    <div class="footleft2">
         &copy; 2019, Oracle Corporation and/or its affiliates. 
        <a href="/en/home/terms">Terms of Use</a>. <a href="http://www.oracle.com/us/legal/privacy/index.html">Privacy Policy</a>. <a href="http://www.oracle.com/us/legal/third-party-trademarks/third-party-trademarks-078568.html">Trademarks</a>
    </div>

    <div class="footright">
        <img src="/images/common/logo_oracle_footer.gif" alt="Oracle Corporation" height="22" width="91">
    </div>

    <div style="clear: both;"><img src="/images/spacer.gif" alt="" height="30" width="1"></div>
</div>

<!-- ** END: Footer Table ** //-->



<!-- ** Menu Start ** //-->



</body>
</html>
<!-- ** END: footer.jsp ** //-->

